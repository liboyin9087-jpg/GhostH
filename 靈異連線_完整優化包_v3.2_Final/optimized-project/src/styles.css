/**
 * 《靈異連線》Spectral Link - Enhanced Styles
 * 完整優化版樣式表
 */

/* ===== UI COLOR TOKENS (DEMO LOCK) ===== */
:root {
  /* Base UI - from spec */
  --ui-bg: rgba(10, 14, 12, 0.92);
  --ui-bg-soft: rgba(15, 20, 18, 0.75);
  --ui-border: rgba(120, 130, 125, 0.35);
  --ui-border-soft: rgba(120, 130, 125, 0.20);

  --ui-text-primary: rgba(235, 235, 235, 0.92);
  --ui-text-secondary: rgba(190, 190, 190, 0.65);
  --ui-text-muted: rgba(160, 160, 160, 0.45);

  /* Function Colors */
  --ui-emerald: rgba(52, 211, 153, 0.90);
  --ui-emerald-soft: rgba(52, 211, 153, 0.25);

  --ui-cyan: rgba(34, 211, 238, 0.95);
  --ui-cyan-soft: rgba(34, 211, 238, 0.25);

  --ui-amber: rgba(234, 179, 8, 0.95);
  --ui-amber-soft: rgba(234, 179, 8, 0.28);

  --ui-red: rgba(239, 68, 68, 0.95);
  --ui-red-soft: rgba(239, 68, 68, 0.30);

  /* Legacy colors (for compatibility) */
  --color-bg: #000000;
  --color-primary: #10b981;
  --color-danger: #ef4444;
  --color-warning: #f59e0b;
  --color-cyan: #06b6d4;
  --ui-border-active: rgba(16, 185, 129, 0.65);
  
  /* Fonts */
  --font-vhs: 'VT323', 'Courier New', monospace;
  --font-chinese: 'Noto Sans TC', 'Microsoft JhengHei', sans-serif;
  
  /* Transitions */
  --transition-fast: 150ms;
  --transition-normal: 300ms;
  --transition-slow: 500ms;

  /* Font Scale */
  --font-scale: 1;
}

/* Font Scale Variants */
[data-font-scale="small"] { --font-scale: 0.85; }
[data-font-scale="large"] { --font-scale: 1.15; }

/* VHS Strength */
[data-vhs-strength="low"] {
  --vhs-noise-opacity: 0.02;
  --vhs-scanline-opacity: 0.08;
}
[data-vhs-strength="med"] {
  --vhs-noise-opacity: 0.05;
  --vhs-scanline-opacity: 0.15;
}
[data-vhs-strength="high"] {
  --vhs-noise-opacity: 0.10;
  --vhs-scanline-opacity: 0.22;
}

*, *::before, *::after { box-sizing: border-box; }
html, body, #root { height: 100%; margin: 0; padding: 0; background: var(--color-bg); color: #fff; overflow: hidden; }
body { font-family: var(--font-vhs); -webkit-font-smoothing: antialiased; }

.text-vhs { font-family: var(--font-vhs); }
.text-chinese { font-family: var(--font-chinese); }
.small { font-size: 12px; letter-spacing: 0.08em; opacity: 0.85; }
.tiny { font-size: 10px; letter-spacing: 0.14em; opacity: 0.7; }

/* VHS 動畫 */
@keyframes scanline-move { 0% { top: -10%; } 100% { top: 110%; } }
@keyframes rgb-scroll { 0% { transform: translateY(0); } 100% { transform: translateY(18px); } }
@keyframes noise-shift { 0%,100%{transform:translate(0,0)}20%{transform:translate(-2%,2%)}40%{transform:translate(2%,-2%)}60%{transform:translate(-1%,1%)}80%{transform:translate(1%,-1%)} }
@keyframes trackingX { 0%{transform:translateX(-12%);opacity:0}50%{transform:translateX(12%);opacity:1}100%{transform:translateX(-12%);opacity:0} }
@keyframes ghostFlicker { 0%{opacity:0;transform:translate(-50%,-50%)scale(0.95)}35%{opacity:0.9}100%{opacity:0;transform:translate(-50%,-50%)scale(1.05)} }
@keyframes talismanPulse { 0%,100%{transform:scale(1)}50%{transform:scale(1.03)} }
@keyframes float-up { 0%{opacity:1;transform:translateY(0)scale(1)}100%{opacity:0;transform:translateY(-60px)scale(0.3)} }
@keyframes breathe { 0%,100%{transform:scale(1)}50%{transform:scale(1.03)} }
@keyframes pulse-ring { 0%{transform:scale(0.8);opacity:1}100%{transform:scale(1.8);opacity:0} }
@keyframes ripple { 0%{transform:scale(0.5);opacity:0.8}100%{transform:scale(2);opacity:0} }
@keyframes shimmer { 0%{background-position:-200% center}100%{background-position:200% center} }
@keyframes warning-pulse { 0%,100%{box-shadow:inset 0 0 30px rgba(239,68,68,0)}50%{box-shadow:inset 0 0 60px rgba(239,68,68,0.2)} }
@keyframes heartbeat { 0%,100%{transform:scale(1)}14%{transform:scale(1.15)}28%{transform:scale(1)}42%{transform:scale(1.08)}56%{transform:scale(1)} }
@keyframes sensor-blink { 0%,90%,100%{opacity:1}95%{opacity:0.3} }
@keyframes scene-static { 0%,100%{background-position:0 0}50%{background-position:-5% -5%} }

/* 按鈕 */
.btn {
  appearance: none;
  border: 1px solid var(--ui-border);
  background: linear-gradient(180deg, rgba(25,25,25,0.9) 0%, rgba(15,15,15,0.95) 100%);
  color: #fff;
  border-radius: 12px;
  padding: 10px 12px;
  font-family: inherit;
  cursor: pointer;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  gap: 3px;
  min-height: 64px;
  position: relative;
  overflow: hidden;
  transition: all var(--transition-normal) ease;
  -webkit-tap-highlight-color: transparent;
}
.btn::before { content:''; position:absolute; inset:0; background:linear-gradient(180deg,rgba(255,255,255,0.05)0%,transparent 50%); pointer-events:none; }
.btn:hover:not(:disabled) { background:linear-gradient(180deg,rgba(35,35,35,0.95)0%,rgba(25,25,25,0.98)100%); border-color:rgba(150,150,150,0.5); transform:translateY(-1px); }
.btn:active:not(:disabled) { transform:translateY(1px)scale(0.98); }
.btn[aria-pressed="true"] { border-color:var(--ui-border-active); background:linear-gradient(180deg,rgba(16,185,129,0.15)0%,rgba(16,185,129,0.08)100%); box-shadow:0 0 0 1px rgba(16,185,129,0.2),0 4px 20px rgba(16,185,129,0.15); }
.btn:disabled { opacity:0.4; cursor:not-allowed; filter:grayscale(0.5); }
.btn--scan[aria-pressed="true"] { border-color:rgba(6,182,212,0.65); background:linear-gradient(180deg,rgba(6,182,212,0.15)0%,rgba(6,182,212,0.08)100%); box-shadow:0 0 0 1px rgba(6,182,212,0.2),0 4px 20px rgba(6,182,212,0.15); }
.btn--talisman[aria-pressed="true"] { border-color:rgba(245,158,11,0.65); background:linear-gradient(180deg,rgba(245,158,11,0.15)0%,rgba(245,158,11,0.08)100%); box-shadow:0 0 0 1px rgba(245,158,11,0.2),0 4px 20px rgba(245,158,11,0.15); }
.btn__icon { font-size:22px; transition:transform var(--transition-normal) ease; }
.btn[aria-pressed="true"] .btn__icon { animation:breathe 2s ease-in-out infinite; }

/* 進度條 */
.progress-bar { height:8px; background:rgba(40,40,40,0.9); border-radius:999px; overflow:hidden; border:1px solid rgba(80,80,80,0.3); }
.progress-bar__fill { height:100%; border-radius:999px; transition:width 0.3s ease; position:relative; }
.progress-bar__fill::after { content:''; position:absolute; top:0; left:0; right:0; height:50%; background:linear-gradient(180deg,rgba(255,255,255,0.2)0%,transparent 100%); border-radius:999px 999px 0 0; }
.progress-bar--spirit .progress-bar__fill { background:linear-gradient(90deg,rgba(180,83,9,0.95),rgba(245,158,11,0.95)); box-shadow:0 0 10px rgba(245,158,11,0.3); }
.progress-bar--danger .progress-bar__fill { background:linear-gradient(90deg,rgba(185,28,28,0.95),rgba(239,68,68,0.95)); animation:heartbeat 1s ease-in-out infinite; }

/* 感測器 */
.sensor-panel { padding:8px 10px; background:linear-gradient(135deg,rgba(20,20,20,0.85)0%,rgba(10,10,10,0.9)100%); border:1px solid rgba(80,80,80,0.3); border-radius:8px; backdrop-filter:blur(4px); }
.sensor-panel--danger { border-color:rgba(239,68,68,0.5); animation:warning-pulse 2s ease-in-out infinite; }

/* REC 指示燈 */
.rec-indicator { display:flex; align-items:center; gap:8px; }
.rec-indicator__dot { width:12px; height:12px; border-radius:50%; background:#dc2626; box-shadow:0 0 8px rgba(220,38,38,0.6); animation:sensor-blink 2s ease-in-out infinite; }
.rec-indicator--unstable .rec-indicator__dot { animation:heartbeat 0.8s ease-in-out infinite; }

/* 無障礙 */
@media (prefers-reduced-motion:reduce) { *,*::before,*::after { animation-duration:0.001ms!important; animation-iteration-count:1!important; transition-duration:0.001ms!important; } }
@media (hover:none) and (pointer:coarse) { .btn { min-height:72px; } }
